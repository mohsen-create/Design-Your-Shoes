<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Pro Shoe Designer - Nike Style</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap');
  body {
    margin: 0;
    background: #fff;
    font-family: 'Montserrat', sans-serif;
    color: #222;
    display: flex;
    justify-content: center;
    align-items: flex-start;
    min-height: 100vh;
    padding: 40px 20px;
    user-select: none;
  }
  #container {
    display: flex;
    width: 960px;
    max-width: 95vw;
    background: #f9f9f9;
    border-radius: 20px;
    box-shadow: 0 14px 50px rgba(0,0,0,0.15);
    overflow: hidden;
  }
  #sidebar {
    width: 320px;
    background: #fff;
    padding: 30px 30px 40px;
    box-sizing: border-box;
    border-right: 1px solid #ddd;
    display: flex;
    flex-direction: column;
  }
  #sidebar h2 {
    font-weight: 700;
    font-size: 28px;
    margin-bottom: 30px;
    user-select: text;
  }
  /* Shoe Type Tabs */
  #shoeTypes {
    display: flex;
    gap: 15px;
    margin-bottom: 35px;
  }
  .type-tab {
    flex: 1;
    text-align: center;
    padding: 12px 0;
    font-weight: 600;
    font-size: 16px;
    border-radius: 12px;
    cursor: pointer;
    background: #eee;
    transition: background-color 0.3s, color 0.3s;
    box-shadow: 0 3px 6px rgba(0,0,0,0.1);
    user-select: none;
    position: relative;
  }
  .type-tab.selected,
  .type-tab:hover {
    background: #0072e6;
    color: #fff;
    box-shadow: 0 6px 12px rgba(0,114,230,0.5);
  }
  /* Color Picker */
  #colorLabel {
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 12px;
    user-select: text;
  }
  #colors {
    display: flex;
    gap: 14px;
    margin-bottom: 40px;
  }
  .color-swatch {
    width: 42px;
    height: 42px;
    border-radius: 50%;
    cursor: pointer;
    border: 3px solid transparent;
    box-shadow: 0 2px 6px rgba(0,0,0,0.15);
    transition: border-color 0.3s ease;
    position: relative;
  }
  .color-swatch:hover {
    box-shadow: 0 2px 12px rgba(0,0,0,0.3);
  }
  .color-swatch.selected {
    border-color: #0072e6;
  }
  .color-swatch[data-tooltip]:hover::after {
    content: attr(data-tooltip);
    position: absolute;
    bottom: 120%;
    left: 50%;
    transform: translateX(-50%);
    background: #333;
    color: white;
    font-size: 12px;
    padding: 4px 8px;
    border-radius: 6px;
    white-space: nowrap;
    pointer-events: none;
    opacity: 0.85;
  }
  /* Logo Upload */
  #logoUploadLabel {
    font-weight: 700;
    font-size: 18px;
    margin-bottom: 10px;
    user-select: text;
  }
  #logoUpload {
    cursor: pointer;
  }
  /* Download Button */
  #downloadBtn {
    margin-top: auto;
    padding: 14px 0;
    font-weight: 700;
    font-size: 16px;
    background-color: #0072e6;
    border: none;
    color: white;
    border-radius: 14px;
    cursor: pointer;
    transition: background-color 0.3s ease;
    user-select: none;
  }
  #downloadBtn:hover {
    background-color: #005bb5;
  }
  /* Shoe Display */
  #shoeDisplay {
    flex-grow: 1;
    position: relative;
    background: white;
    overflow: visible;
    display: flex;
    justify-content: center;
    align-items: center;
    padding: 30px;
  }
  #shoeImage {
    max-width: 600px;
    max-height: 650px;
    user-select: none;
    pointer-events: none;
    filter: drop-shadow(0 8px 6px rgba(0,0,0,0.15));
    border-radius: 15px;
    transition: transform 0.25s ease;
  }
  #logoImage {
    position: absolute;
    top: 48%;
    left: 68%;
    width: 130px;
    height: auto;
    cursor: grab;
    user-select: none;
    display: none;
    transform: translate(-50%, -50%);
    transition: box-shadow 0.3s ease;
    border-radius: 8px;
  }
  #logoImage:active {
    cursor: grabbing;
    box-shadow: 0 0 20px #0072e6aa;
  }
  /* Responsive tweaks */
  @media (max-width: 800px) {
    #container {
      flex-direction: column;
      width: 100vw;
      height: 100vh;
      max-width: none;
      border-radius: 0;
      box-shadow: none;
    }
    #sidebar {
      width: 100%;
      border-right: none;
      border-bottom: 1px solid #ddd;
      padding: 20px;
      flex-direction: row;
      justify-content: space-around;
      align-items: center;
    }
    #shoeDisplay {
      padding: 15px;
      flex-grow: 1;
      height: 60vh;
    }
    #shoeImage {
      max-width: 90vw;
      max-height: 100%;
    }
  }
</style>
</head>
<body>

<div id="container">
  <aside id="sidebar">
    <h2>Shoe Designer</h2>

    <div id="shoeTypes">
      <div class="type-tab selected" data-type="sneaker" title="Sneakers">Sneakers</div>
      <div class="type-tab" data-type="cleats" title="Cleats">Cleats</div>
      <div class="type-tab" data-type="athletic" title="Athletic">Athletic</div>
    </div>

    <label id="colorLabel">Choose Color</label>
    <div id="colors" aria-label="Color selection"></div>

    <label id="logoUploadLabel" for="logoUpload">Upload Logo (PNG with transparency)</label>
    <input type="file" id="logoUpload" accept="image/png" />

    <button id="downloadBtn">Download Design</button>
  </aside>

  <main id="shoeDisplay" aria-label="Shoe preview area">
    <img id="shoeImage" src="" alt="Shoe Preview" draggable="false" />
    <img id="logoImage" alt="Uploaded Logo" draggable="false" />
  </main>
</div>

<script>
  const shoeTypes = document.querySelectorAll('.type-tab');
  const colorsContainer = document.getElementById('colors');
  const shoeImage = document.getElementById('shoeImage');
  const logoUpload = document.getElementById('logoUpload');
  const logoImage = document.getElementById('logoImage');
  const downloadBtn = document.getElementById('downloadBtn');

  let currentType = 'sneaker';
  let currentColor = 'White';

  // Realistic shoe images (PNG transparent background, public mockups)
  const shoeImages = {
    sneaker: {
      White: 'https://i.imgur.com/w4DYDqv.png',
      Black: 'https://i.imgur.com/vsQww89.png',
      Red: 'https://i.imgur.com/F6Ri4ps.png',
      Blue: 'https://i.imgur.com/9q0z4y7.png'
    },
    cleats: {
      White: 'https://i.imgur.com/rQXN4Kn.png',
      Black: 'https://i.imgur.com/QWzFOGp.png',
      Red: 'https://i.imgur.com/KbwsBnp.png',
      Blue: 'https://i.imgur.com/3VhK7Oa.png'
    },
    athletic: {
      White: 'https://i.imgur.com/FV0kyZ5.png',
      Black: 'https://i.imgur.com/wmBz5UL.png',
      Red: 'https://i.imgur.com/9w4i8uW.png',
      Blue: 'https://i.imgur.com/e9fMRsf.png'
    }
  };

  const availableColors = {
    sneaker: ['White', 'Black', 'Red', 'Blue'],
    cleats: ['White', 'Black', 'Red', 'Blue'],
    athletic: ['White', 'Black', 'Red', 'Blue']
  };

  // Create color swatches dynamically
  function renderColors() {
    colorsContainer.innerHTML = '';
    availableColors[currentType].forEach(color => {
      const swatch = document.createElement('div');
      swatch.classList.add('color-swatch');
      swatch.style.backgroundColor = color.toLowerCase();
      swatch.title = color;
      if (color === currentColor) swatch.classList.add('selected');
      swatch.setAttribute('data-tooltip', color);
      swatch.setAttribute('role', 'button');
      swatch.setAttribute('tabindex', '0');
      swatch.addEventListener('click', () => {
        currentColor = color;
        updateShoeImage();
        updateSelectedColor();
      });
      swatch.addEventListener('keypress', (e) => {
        if (e.key === 'Enter' || e.key === ' ') {
          e.preventDefault();
          swatch.click();
        }
      });
      colorsContainer.appendChild(swatch);
    });
  }

  // Update selected color border
  function updateSelectedColor() {
    colorsContainer.querySelectorAll('.color-swatch').forEach(swatch => {
      swatch.classList.toggle('selected', swatch.title === currentColor);
    });
  }

  // Update shoe image based on type & color
  function updateShoeImage() {
    shoeImage.src = shoeImages[currentType][currentColor];
    shoeImage.alt = `${currentColor} ${currentType} shoe`;
  }

  // Update selected shoe type tab
  function updateSelectedType() {
    shoeTypes.forEach(tab => {
      tab.classList.toggle('selected', tab.dataset.type === currentType);
    });
  }

  // Logo upload handling
  logoUpload.addEventListener('change', (e) => {
    const file = e.target.files[0];
    if (!file) return;
    if (!file.type.startsWith('image/png')) {
      alert('Please upload a PNG image with transparency.');
      logoUpload.value = '';
      return;
    }
    const reader = new FileReader();
    reader.onload = (event) => {
      logoImage.src = event.target.result;
      logoImage.style.display = 'block';
      // Reset logo position & size
      logoImage.style.top = '48%';
      logoImage.style.left = '68%';
      logoImage.style.width = '130px';
      logoImage.style.height = 'auto';
    };
    reader.readAsDataURL(file);
  });

  // Drag and Resize Logo
  let isDragging = false;
  let dragOffsetX = 0;
  let dragOffsetY = 0;

  logoImage.addEventListener('mousedown', (e) => {
    e.preventDefault();
    isDragging = true;
    const rect = logoImage.getBoundingClientRect();
    dragOffsetX = e.clientX - rect.left;
    dragOffsetY = e.clientY - rect.top;
    logoImage.style.cursor = 'grabbing';
  });

  window.addEventListener('mouseup', () => {
    isDragging = false;
    logoImage.style.cursor = 'grab';
  });

  window.addEventListener('mousemove', (e) => {
    if (!isDragging) return;
    const containerRect = shoeImage.parentElement.getBoundingClientRect();

    let newLeft = e.clientX - containerRect.left - dragOffsetX;
    let newTop = e.clientY - containerRect.top - dragOffsetY;

    // Clamp inside container
    newLeft = Math.min(Math.max(0, newLeft), containerRect.width - logoImage.offsetWidth);
    newTop = Math.min(Math.max(0, newTop), containerRect.height - logoImage.offsetHeight);

    logoImage.style.left = newLeft + 'px';
    logoImage.style.top = newTop + 'px';
  });

  // Resize logo with mouse wheel (Ctrl+Wheel)
  logoImage.addEventListener('wheel', (e) => {
    if (!e.ctrlKey) return;
    e.preventDefault();
    let width = logoImage.offsetWidth;
    if (e.deltaY < 0) width += 10;
    else width -= 10;
    width = Math.min(Math.max(40, width), 400);
    logoImage.style.width = width + 'px';
  });

  // Shoe type tab clicks
  shoeTypes.forEach(tab => {
    tab.addEventListener('click', () => {
      if (currentType === tab.dataset.type) return;
      currentType = tab.dataset.type;
      currentColor = availableColors[currentType][0];
      updateSelectedType();
      renderColors();
      updateShoeImage();
      // Hide logo on shoe type change (optional)
      logoImage.style.display = 'none';
      logoUpload.value = '';
    });
  });

  // Download design canvas
  downloadBtn.addEventListener('click', () => {
    const canvas = document.createElement('canvas');
    const container = shoeImage.parentElement;
    canvas.width = container.clientWidth;
    canvas.height = container.clientHeight;
    const ctx = canvas.getContext('2d');

    const shoeImg = new Image();
    shoeImg.crossOrigin = 'anonymous';
    shoeImg.src = shoeImage.src;

    shoeImg.onload = () => {
      ctx.drawImage(shoeImg, 0, 0, canvas.width, canvas.height);
      if (logoImage.style.display !== 'none') {
        const logoX = parseFloat(logoImage.style.left);
        const logoY = parseFloat(logoImage.style.top);
        const logoW = logoImage.clientWidth;
        const logoH = logoImage.clientHeight;

        const scaleX = canvas.width / container.clientWidth;
        const scaleY = canvas.height / container.clientHeight;

        const logoCanvasX = logoX * scaleX;
        const logoCanvasY = logoY * scaleY;
        const logoCanvasW = logoW * scaleX;
        const logoCanvasH = logoH * scaleY;

        const logoCanvasImg = new Image();
        logoCanvasImg.crossOrigin = 'anonymous';
        logoCanvasImg.src = logoImage.src;

        logoCanvasImg.onload = () => {
          ctx.drawImage(logoCanvasImg, logoCanvasX, logoCanvasY, logoCanvasW, logoCanvasH);
          saveCanvas();
        }
      } else {
        saveCanvas();
      }
    };

    function saveCanvas() {
      canvas.toBlob(blob => {
        const url = URL.createObjectURL(blob);
        const a = document.createElement('a');
        a.href = url;
        a.download = 'shoe-design.png';
        document.body.appendChild(a);
        a.click();
        a.remove();
        URL.revokeObjectURL(url);
      });
    }
  });

  // Initial render
  updateSelectedType();
  renderColors();
  updateShoeImage();
</script>

</body>
</html>
