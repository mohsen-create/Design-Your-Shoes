<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Realistic Shoe Designer - White Background</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap');
  body, html {
    margin: 0; padding: 0; overflow: hidden;
    font-family: 'Poppins', sans-serif;
    background: #ffffff; /* WHITE background */
    color: #222222;
    user-select: none;
  }
  #container {
    display: flex;
    height: 100vh;
  }
  #canvas-container {
    flex: 1;
    position: relative;
    background: #ffffff; /* match body background */
  }
  canvas {
    width: 100%;
    height: 100%;
    display: block;
  }
  #ui {
    width: 350px;
    background: #f7f7f7; /* light UI background */
    padding: 30px 25px;
    box-sizing: border-box;
    display: flex;
    flex-direction: column;
    gap: 30px;
    border-left: 3px solid #4caf50;
    color: #222;
  }
  h1 {
    margin: 0 0 10px;
    font-weight: 600;
    font-size: 1.8rem;
    color: #4caf50;
    user-select: none;
  }
  label {
    font-weight: 600;
    margin-bottom: 6px;
    display: block;
    font-size: 0.95rem;
    user-select: none;
  }
  select, input[type=color], button {
    width: 100%;
    padding: 12px 10px;
    font-size: 1rem;
    border-radius: 8px;
    border: 1px solid #ccc;
    outline: none;
    cursor: pointer;
    background: #fff;
    color: #222;
    transition: border-color 0.3s ease;
    font-family: 'Poppins', sans-serif;
  }
  select:hover, input[type=color]:hover, button:hover {
    border-color: #4caf50;
  }
  button {
    font-weight: 700;
    letter-spacing: 0.05em;
    background-color: #4caf50;
    border: none;
    color: white;
  }
  button:hover {
    background-color: #45a045;
  }
  .footer {
    margin-top: auto;
    font-size: 0.75rem;
    color: #666;
    text-align: center;
    user-select: none;
  }
</style>
</head>
<body>
<div id="container">
  <div id="canvas-container"></div>
  <div id="ui">
    <h1>Shoe Designer</h1>
    <div>
      <label for="shoeType">Shoe Type</label>
      <select id="shoeType" title="Choose shoe type">
        <option value="sneaker" selected>Sneaker</option>
        <option value="cleat">Cleat</option>
        <option value="athletic">Athletic</option>
      </select>
    </div>
    <div>
      <label for="colorUpper">Upper Color</label>
      <input type="color" id="colorUpper" value="#FFFFFF" title="Change upper color" />
    </div>
    <div>
      <label for="colorSole">Sole Color</label>
      <input type="color" id="colorSole" value="#BBBBBB" title="Change sole color" />
    </div>
    <div>
      <label for="colorLogo">Logo Color</label>
      <input type="color" id="colorLogo" value="#4caf50" title="Change logo color" />
    </div>
    <div>
      <label for="brandLogo">Brand Logo</label>
      <select id="brandLogo" title="Choose brand logo">
        <option value="none" selected>None</option>
        <option value="nike">Nike</option>
        <option value="adidas">Adidas</option>
        <option value="puma">Puma</option>
      </select>
    </div>
    <button id="downloadBtn">Download Shoe Image</button>
    <div class="footer">Powered by Three.js • Realistic Simple Shoe Demo</div>
  </div>
</div>

<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/build/three.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/three@0.153.0/examples/js/controls/OrbitControls.js"></script>
<script>
(() => {
  const container = document.getElementById('canvas-container');
  const scene = new THREE.Scene();
  scene.background = new THREE.Color(0xffffff); // White bg

  const camera = new THREE.PerspectiveCamera(45, container.clientWidth / container.clientHeight, 0.1, 100);
  camera.position.set(0, 1.3, 3.5); // pulled back for full shoe view

  const renderer = new THREE.WebGLRenderer({antialias: true, alpha: false});
  renderer.setSize(container.clientWidth, container.clientHeight);
  renderer.setClearColor(0xffffff, 1); // white clear color
  renderer.shadowMap.enabled = true;
  container.appendChild(renderer.domElement);

  const controls = new THREE.OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;
  controls.dampingFactor = 0.1;
  controls.minDistance = 1.5;
  controls.maxDistance = 6;
  controls.target.set(0, 1, 0);
  controls.update();

  // Lights — stronger directional for contrast on white bg
  const ambientLight = new THREE.AmbientLight(0xffffff, 0.4);
  scene.add(ambientLight);

  const directionalLight = new THREE.DirectionalLight(0xffffff, 1.2);
  directionalLight.position.set(5, 10, 7);
  directionalLight.castShadow = true;
  directionalLight.shadow.mapSize.width = 2048;
  directionalLight.shadow.mapSize.height = 2048;
  directionalLight.shadow.camera.left = -3;
  directionalLight.shadow.camera.right = 3;
  directionalLight.shadow.camera.top = 3;
  directionalLight.shadow.camera.bottom = -3;
  scene.add(directionalLight);

  // Floor — subtle gray
  const floorGeo = new THREE.PlaneGeometry(10, 10);
  const floorMat = new THREE.ShadowMaterial({opacity: 0.2});
  const floor = new THREE.Mesh(floorGeo, floorMat);
  floor.rotation.x = -Math.PI / 2;
  floor.position.y = 0;
  floor.receiveShadow = true;
  scene.add(floor);

  // Shoe group container
  let shoeGroup = new THREE.Group();
  scene.add(shoeGroup);

  // Shoe parts

  // Upper (shoe body)
  const upperGeo = new THREE.BoxGeometry(1.8, 0.9, 0.6, 4, 4, 4);
  const upperMat = new THREE.MeshPhysicalMaterial({
    color: 0xffffff,
    roughness: 0.4,
    metalness: 0.25,
    clearcoat: 0.8,
    clearcoatRoughness: 0.15,
  });
  const upperMesh = new THREE.Mesh(upperGeo, upperMat);
  upperMesh.position.set(0, 1, 0);
  upperMesh.castShadow = true;
  upperMesh.receiveShadow = true;

  // Sole (bottom)
  const soleGeo = new THREE.BoxGeometry(1.9, 0.35, 0.75, 4, 1, 4);
  const soleMat = new THREE.MeshPhysicalMaterial({
    color: 0xBBBBBB,
    roughness: 0.6,
    metalness: 0.4,
  });
  const soleMesh = new THREE.Mesh(soleGeo, soleMat);
  soleMesh.position.set(0, 0.65, 0);
  soleMesh.castShadow = true;
  soleMesh.receiveShadow = true;

  // Logo (plane with canvas texture)
  const logoCanvas = document.createElement('canvas');
  logoCanvas.width = 256;
  logoCanvas.height = 256;
  const logoCtx = logoCanvas.getContext('2d');

  function drawLogo(brand, color) {
    logoCtx.clearRect(0, 0, 256, 256);
    logoCtx.fillStyle = 'rgba(0,0,0,0)';
    logoCtx.fillRect(0, 0, 256, 256);
    logoCtx.strokeStyle = color;
    logoCtx.fillStyle = color;
    logoCtx.lineCap = 'round';
    logoCtx.lineJoin = 'round';
    logoCtx.lineWidth = 20;
    logoCtx.textAlign = 'center';
    logoCtx.textBaseline = 'middle';

    if (brand === 'nike') {
      // swoosh approx
      logoCtx.beginPath();
      logoCtx.moveTo(50, 180);
      logoCtx.quadraticCurveTo(130, 100, 200, 40);
      logoCtx.stroke();
    } else if (brand === 'adidas') {
      // 3 stripes vertical
      logoCtx.fillRect(60, 80, 20, 120);
      logoCtx.fillRect(100, 80, 20, 120);
      logoCtx.fillRect(140, 80, 20, 120);
    } else if (brand === 'puma') {
      // P letter
      logoCtx.font = 'bold 180px Arial';
      logoCtx.fillText('P', 128, 140);
    }
  }

  drawLogo('none', '#4caf50');

  const logoTexture = new THREE.CanvasTexture(logoCanvas);
  const logoMat = new THREE.MeshBasicMaterial({map: logoTexture, transparent: true});
  const logoGeo = new THREE.PlaneGeometry(0.5, 0.5);
  const logoMesh = new THREE.Mesh(logoGeo, logoMat);
  logoMesh.position.set(0.55, 1.05, 0.31);
  logoMesh.rotation.y = -Math.PI / 8;
  logoMesh.renderOrder = 1;

  shoeGroup.add(upperMesh);
  shoeGroup.add(soleMesh);
  shoeGroup.add(logoMesh);

  // UI Elements
  const shoeTypeSelect = document.getElementById('shoeType');
  const colorUpperInput = document.getElementById('colorUpper');
  const colorSoleInput = document.getElementById('colorSole');
  const colorLogoInput = document.getElementById('colorLogo');
  const brandLogoSelect = document.getElementById('brandLogo');
  const downloadBtn = document.getElementById('downloadBtn');

  function updateColors() {
    upperMat.color.set(colorUpperInput.value);
    soleMat.color.set(colorSoleInput.value);
    drawLogo(brandLogoSelect.value, colorLogoInput.value);
    logoTexture.needsUpdate = true;
  }

  function updateShoeType() {
    const val = shoeTypeSelect.value;
    if (val === 'sneaker') {
      upperMesh.scale.set(1.8, 0.9, 0.6);
      soleMesh.scale.set(1.9, 0.35, 0.75);
    } else if (val === 'cleat') {
      upperMesh.scale.set(1.6, 0.85, 0.65);
      soleMesh.scale.set(2.1, 0.4, 0.8);
    } else if (val === 'athletic') {
      upperMesh.scale.set(1.7, 1.0, 0.65);
      soleMesh.scale.set(1.8, 0.4, 0.7);
    }
  }

  shoeTypeSelect.addEventListener('change', () => {
    updateShoeType();
  });

  colorUpperInput.addEventListener('input', () => {
    updateColors();
  });

  colorSoleInput.addEventListener('input', () => {
    updateColors();
  });

  colorLogoInput.addEventListener('input', () => {
    updateColors();
  });

  brandLogoSelect.addEventListener('change', () => {
    updateColors();
  });

  downloadBtn.addEventListener('click', () => {
    renderer.domElement.toBlob((blob) => {
      const a = document.createElement('a');
      a.href = URL.createObjectURL(blob);
      a.download = 'shoe-design.png';
      a.click();
    });
  });

  // Initialize
  updateColors();
  updateShoeType();

  window.addEventListener('resize', () => {
    camera.aspect = container.clientWidth / container.clientHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(container.clientWidth, container.clientHeight);
  });

  // Animate and spin shoe slowly for better presentation
  function animate() {
    requestAnimationFrame(animate);
    shoeGroup.rotation.y += 0.005;
    controls.update();
    renderer.render(scene, camera);
  }
  animate();
})();
</script>
</body>
</html>
